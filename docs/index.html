<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title> Polites</title>

<script src="site_libs/header-attrs-2.27/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/cosmo.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/jqueryui-1.13.2/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<link href="site_libs/font-awesome-6.4.2/css/all.min.css" rel="stylesheet" />
<link href="site_libs/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet" />
<link rel='shortcut icon' type='image/x-icon' href='favicon.ico' />

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>






<link rel="stylesheet" href="style.css" type="text/css" />



<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark the anchor link active (and if it's in a dropdown, also mark that active)
  var dropdown = menuAnchor.closest('li.dropdown');
  if (window.bootstrap) { // Bootstrap 4+
    menuAnchor.addClass('active');
    dropdown.find('> .dropdown-toggle').addClass('active');
  } else { // Bootstrap 3
    menuAnchor.parent().addClass('active');
    dropdown.addClass('active');
  }

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before, .tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "\e259";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "\e258";
  font-family: 'Glyphicons Halflings';
  border: none;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}

.tocify-subheader {
  display: inline;
}
.tocify-subheader .tocify-item {
  font-size: 0.95em;
}

</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbar" data-bs-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html"><div><img src="ohdsi16x16.png"></img> Polites </div></a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    <span class="fa fa-list"></span>
     
    Getting Started
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="index.html">Home</a>
    </li>
    <li>
      <a href="sqlserver.html">Microsoft SqlServer</a>
    </li>
    <li class="dropdown-header">PostgreSql (comming soon)</li>
    <li class="dropdown-header">Docker (comming soon)</li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/NACHC-CAD/polites">
    <span class="fa fa-github"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">



<h1 class="title toc-ignore"><img src="ohdsi40x40.png"></img>
<b>Polites</b></h1>

</div>


<!--
*
* Quick Links
*
-->
<h2>
Quick Links
</h2>
<p>
Polites is targeted to support Microsoft SqlServer, PostgreSql, and
Databricks when the initial release is completed. Below are links to the
specific documentation for each platform.
<ul>
<li>
<a href="./sqlserver.html">Microsoft SqlServer</a>
</li>
<li style="color: gray;">
PostgreSql (coming soon)
</li>
<li style="color: gray;">
Databricks (coming soon)
</li>
</ul>
</p>
<!--
*
* Introduction
*
-->
<h2>
Introduction
</h2>
<p style="text-align: justify;">
Polites<sup>1</sup> is a Java based tool that enables the automation of
complete OHDSI implementations for either standalone (non-Docker) or
Broadsea<sup>2</sup> based OHDSI deployments. Broadsea provides a
turn-key solution with unparalleled ease of use and a standardized
stable production deployment that includes an instance of a Common Data
Model replete with test data in PostgreSql. “Broadsea 3.0 provides a
flexible approach to deploying OHDSI tools that are typically
challenging to set up, and establishes a framework for supporting new
OHDSI tools to come. Any site, regardless of size, can deploy a wide
range of OHDSI tools on a laptop or a production server”<sup>3</sup>
using Broadsea. However, after initial deployment there are
customizations that most implementations will want to make to create a
production, test, or development instance of an OHDSI implementation.
This includes the creation of an independent instance of the CDM that
could be in the existing Broadsea instance of PostgreSql or in any of
the other data management systems supported by OHDSI (including Oracle,
Microsoft Sql Server, PostgreSql, Databricks, etc.). Creation of this
environment entails numerous steps that need to integrated and executed
flawlessly. This process can be time consuming and fraught with errors
and includes the creation of multiple databases and/or schemas and other
database objects, creation of multiple users with detailed specific
privileges, the creation of meta data such as the CDM source record and
webapi records, the importing of vocabulary data, the creation of
sequences for primary keys for ETL processes, the creation of indexes
and constraints, the importing of data, and the running of other
processes such as Achilles. Polites provides a way to execute all of
these processes and an interface that allows the processes to be
selected individually or run in groups.<br />

<ol>
<li>
Polites GitHub repository. <a
href="https://github.com/NACHC-CAD/polites"
class="uri">https://github.com/NACHC-CAD/polites</a>.
</li>
<li>
Broadsea GitHub repository. <a href="https://github.com/OHDSI/Broadsea"
class="uri">https://github.com/OHDSI/Broadsea</a>.
</li>
<li>
Ajit Londhe, Lee Evans, Sanjay Udoshi, Broadsea 3.0: “BROADening the
ohdSEA”, <a
href="https://www.ohdsi.org/wp-content/uploads/2023/10/Londhe-Ajit_Broadsea-3.0-BROADening-the-ohdSEA_2023symposium-Ajit-Londhe.pdf"
class="uri">https://www.ohdsi.org/wp-content/uploads/2023/10/Londhe-Ajit_Broadsea-3.0-BROADening-the-ohdSEA_2023symposium-Ajit-Londhe.pdf</a>.
</li>
</ol>
</p>
<!--
*
* Installation Overview
*
-->
<h2>
Installation Overview
</h2>
<p>
Installing and running Polites consists of the following steps. These
steps are described in more detail in the linked pages and in the pages
specific to each database (e.g. SqlServer, PostgreSql, and Databricks).
<ul>
<li>
Install the dependencies for Polites and Broadsea. These include the
following.
<ul>
<li>
Java version 8 and 11
</li>
<li>
A git client
</li>
<li>
Microsoft SqlServer
</li>
<li>
Docker
</li>
</ul>
</li>
<li>
Install, Configure and Run Broadsea
</li>
<li>
Install and Configure Polites
</li>
<li>
Run Polites
</li>
</ul>
</p>
<p>
Polites is installed by Downloading the zip file from the latest
release, Unziping the files, and then running the polites.bat file
(which runs “java -jar polites.jar” with some additional performance
parameters). Releases of Polites can be found at
<a href="https://github.com/NACHC-CAD/polites/releases">https://github.com/NACHC-CAD/polites/releases</a>.
<br/> <img src="img/index/download.png" />
</p>
<p>
After downloading and extracting the zip file you should see the
following files. <br/> <img src="img/index/extracted.png" /> <br/> The
auth folder contains two files: app.properties and
sqlserver-demo-app.properties. The sqlserver-demo-app.properties file
contains and example configuration for Microsoft SqlServer that should
work out of the box. The app.properties file contains a single line that
points to the actual configuration file. This alows the configuration
file and any sensitive information this file might contain such as
passwords to exist anywhere that is accessible by the file system.
</p>
<!--
*
* Configuration
*
-->
<h2>
Configuration
</h2>
<p>
All configuration for the Polites application is in a single
configuration file. This configureation file is pointed to by the
./auth/app.properties file as shown below. Note the path to the
configuration file can be on the class path or can be an absolute
reference (e.g. C:\path\to\myfile.properties). The downloaded zip file
contains an exmple configuration for a Microsoft SqlServer
implementation that should work out of the box. Modify this file to fit
your specific implementation.
</p>
<!-- app.properties -->
<p>
app.properties contents:
<pre class="pre-scrollable">
/auth/sqlserver-demo-app.properties
</pre>
</p>
<!-- app.properties -->
<p>
sqlserver-demo-app.properties contents:
<pre class="pre-scrollable">
# ---
#
# Example properties file for Polites using Microsoft Sql Server.  
#
# ---

# ---
# GLOBAL PARAMETERS
# ---

DbmsName=sql server
CdmVersion=5.4
ExportDir=C:\\temp\\polites\\export\\sql-server\\synthe_omop

# ---
# DATABASE CONNECTION INFORMATION FOR THE CDM INSTANCE
# The bootstrapUrl parameter is used for system level actions like creating new databases
# The url parameter is used to access the CDM instance and other local databases (e.g. achilles data)
# ---

BootstrapUrl=jdbc:sqlserver://localhost;databaseName=master;integratedSecurity=true;encrypt=false
Url=jdbc:sqlserver://localhost:1433;encrypt=false;TrustServerCertificate=True
Uid=synthea_omop
Pwd=Sneaker01
ServerName=localhost
FullySpecifiedCdmSchemaName=synthea_omop.dbo

# ---
# DATABASE DRIVER
# ---

DatabaseDriverName=sqlServer_12_6
DatabaseDrvierPath=C:\\temp\\polites\\drivers\\sqlserver

# ---
# POSTGRES CONNECTION 
# Connection parameters to connect to the PostgreSql instance hosting the webapi schema.
# ---

# bootstrap connection for atlas postgres
PostgresBootstrapUrl=jdbc:postgresql://127.0.0.1:5432
PostgresBootstrapUid=postgres
PostgresBootstrapPwd=mypass
PostgresServer=127.0.0.1/postgres
PostgresPort=5432
PostgresWebApiDatabaseName=postgres
PostgresWebApiSchemaName=webapi
PostgresPathToDriver=C:\\temp\\polites\\drivers\\postgres\\42.3.3

# ---
# VALUES USED TO CREATE CDM_SOURCE RECORD
# These values are used by the Data Quality Dashboard. Documented here:
#   https://nachc-cad.github.io/fhir-to-omop/pages/navbar/ohdsi-tools/dqd/DataQualityDashboard.html
#   https://ohdsi.github.io/DataQualityDashboard/ 
# ---

CdmSourceName=NACHC Test
CdmSourceAbbreviation=NACHC-TEST
CdmHolder=johngresh@curlewconsulting.com
SourceDescription=Test database
SourceDocumentationReference=https://github.com/NACHC-CAD/fhir-to-omop
CdmEtlReference=N/A 
SourceReleaseDate=2021-12-01
CdmReleaseDate=2021-12-01
VocabularyVersion=v5.0 04-FEB-22
CdmVersionConceptId=756265

# ---
# TERMINOLOGY
# ---
TerminologyRootDir=C:\\temp\\polites\\default-vocabulary\\
TerminologyDownloadIfNotFound=true
TerminologyDownloadUrl=https://www.dropbox.com/s/2f1xg20yjbiup27/2023-01-01-vocabulary_download_v5_%7Bd496576d-0027-4564-b598-491e7f1ac26f%7D_1672620434076.zip?st=lnn6zg75&dl=1

# ---
# WEBAPI
# ---

# parameters for webapi source and source_daimon records
AtlasDataSourceName=Synthea Omop (Synthea27Nj_5.4)
AtlasDataSourceKey=synthea_omop
AchillesResultsDatabase=synthea_omop_ach_res
AchillesResultsSchema=dbo
AchillesTempDatabase=synthea_omop_ach_temp
AchillesTempSchema=dbo
AchillesVocabDatabase=synthea_omop
AchillesVocabSchema=dbo
AtlasCdmUrl=jdbc:sqlserver://host.docker.internal:1433;databaseName=synthea_omop;encrypt=false;TrustServerCertificate=True;user=synthea_omop;password=Sneaker01

# ---
# CDM CSV
# ---

CdmCsvZipFileLocation=C:\\temp\\polites\\cdm-csv\\
CdmCsvZipFileName=Synthea27Nj_5.4.zip
CdmCsvDownloadUrl=https://www.dropbox.com/scl/fi/mzomqfojvo4ol4tf74l1x/Synthea27Nj_5.4.zip?rlkey=lbd4b744dflcz19x53gjy70tj&dl=1
CdmCsvDownloadIfNotFound=true

</pre>
</p>
<!--
*
* Basic Functionality
*
-->
<h2>
Basic Functionality
</h2>
<p style="text-align: justify;">
Polites currently supports the functionality described below. This is a
high level summary of the basic functionality. For details of each
process see the specific documentation for each platform.
<ul>
<li>
<a href="./sqlserver.html">Microsoft SqlServer</a>
</li>
<li style="color: gray;">
PostgreSql (coming soon)
</li>
<li style="color: gray;">
Databricks (coming soon)
</li>
</ul>
</p>
<p>
<img src="img/index/polites.png" />
</p>
<p>
<h3>
Burn Everything to the Ground
</h3>
<p>Burn Everything to the Ground is the reset option. This option will
remove everything created by Polites including all databases and
users.</p>
<h3>
Create Database
</h3>
<p>This option creates the database that will be used for the Common
Data Model (CDM)</p>
<h3>
Create Database Users
</h3>
<p>This creates the database users that will be used to access the CDM
and other databases such as the databases created by Achilles and other
processes. The users created by this option are granted all of the
privileges required.</p>
<h3>
Create Tables
</h3>
<p>This creates the tables in the CDM database using the ddl scripts
from the OHDSI CDM project in Github.</p>
<h3>
Create CDM Source Record
</h3>
<p>This creates the record required in the cdm_source table of the
CDM.</p>
<h3>
Create Dummy Location and Care Site Records
</h3>
<p>This option truncates the location and care_site tables and adds a
single record in each table representing an unknown value (this is used
in place of null for referential integrity).</p>
</p>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = false;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
